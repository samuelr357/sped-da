<?php

require __DIR__ . '/../../../vendor/autoload.php';
require __DIR__ . '/../../src/Shopee/EtiquetaShopeeProcessor.php';

$files = [
    [
        "etiquetas" => base64_encode(file_get_contents(__DIR__ . "/etiquetas.pdf")),
        "danfes" => [
            '<?xml version="1.0" encoding="UTF-8"?><nfeProc versao="4.00" xmlns="http://www.portalfiscal.inf.br/nfe"><NFe xmlns="http://www.portalfiscal.inf.br/nfe"><infNFe Id="NFe31251260259248000101550010000014991850095972" versao="4.00"><ide><cUF>31</cUF><cNF>85009597</cNF><natOp>VENDA DE PRODUÇÃO DO ESTABELECIMENTO</natOp><mod>55</mod><serie>1</serie><nNF>1499</nNF><dhEmi>2025-12-03T10:30:24-03:00</dhEmi><dhSaiEnt>2025-12-03T10:30:24-03:00</dhSaiEnt><tpNF>1</tpNF><idDest>2</idDest><cMunFG>3104908</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>2</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>1</indFinal><indPres>9</indPres><indIntermed>0</indIntermed><procEmi>0</procEmi><verProc>4.00|EMITEPRO</verProc></ide><emit><CNPJ>60259248000101</CNPJ><xNome>PRIME EMBALAGENS, ACESSORIOS E CURSOS LTDA</xNome><xFant>CESTA STORE</xFant><enderEmit><xLgr>Rodovia De Acesso A Br 267 - Km 2,6</xLgr><nro>2040</nro><xBairro>Cachoeirinha</xBairro><cMun>3104908</cMun><xMun>Baependi</xMun><UF>MG</UF><CEP>37443000</CEP><xPais>Brasil</xPais><fone>3533431886</fone></enderEmit><IE>51659480060</IE><CRT>1</CRT></emit><dest><CPF>15344092709</CPF><xNome>JOAO VICTOR PEREIRA BRAGA</xNome><enderDest><xLgr>Rua Avelino da Rosa Pinheiro</xLgr><nro>2</nro><xBairro>Conselheiro Paulino</xBairro><cMun>3303401</cMun><xMun>Nova Friburgo</xMun><UF>RJ</UF><CEP>28633415</CEP><cPais>1058</cPais><xPais>Brasil</xPais><fone>35987033029</fone></enderDest><indIEDest>9</indIEDest></dest><autXML><CNPJ>32439611000127</CNPJ></autXML><det nItem="1"><prod><cProd>9142-4</cProd><cEAN>7899439391420</cEAN><xProd>CESTA PRESENTE CHAMPAGNE N3</xProd><NCM>46021900</NCM><CFOP>6107</CFOP><uCom>UND</uCom><qCom>1.0000</qCom><vUnCom>36.6400000000</vUnCom><vProd>36.64</vProd><cEANTrib>7899439391420</cEANTrib><uTrib>UND</uTrib><qTrib>1.0000</qTrib><vUnTrib>36.6400000000</vUnTrib><indTot>1</indTot></prod><imposto><vTotTrib>7.49</vTotTrib><ICMS><ICMSSN102><orig>0</orig><CSOSN>102</CSOSN></ICMSSN102></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>53</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>0.00</vBC><pPIS>0.0000</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>0.00</vBC><pCOFINS>0.0000</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><total><ICMSTot><vBC>0.00</vBC><vICMS>0.00</vICMS><vICMSDeson>0.00</vICMSDeson><vFCP>0.00</vFCP><vBCST>0.00</vBCST><vST>0.00</vST><vFCPST>0.00</vFCPST><vFCPSTRet>0.00</vFCPSTRet><vProd>36.64</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>0.00</vDesc><vII>0.00</vII><vIPI>0.00</vIPI><vIPIDevol>0.00</vIPIDevol><vPIS>0.00</vPIS><vCOFINS>0.00</vCOFINS><vOutro>0.00</vOutro><vNF>36.64</vNF><vTotTrib>7.49</vTotTrib></ICMSTot></total><transp><modFrete>0</modFrete><transporta><CNPJ>34028316256256</CNPJ><xNome>EMPRESA BRASILEIRA DE CORREIOS E TELEGRAFOS</xNome><xEnder>RUA DOUTOR MANOEL JOAQUIM</xEnder><xMun>Baependi</xMun><UF>MG</UF></transporta><vol><qVol>1</qVol><pesoL>0.219</pesoL><pesoB>0.219</pesoB></vol></transp><cobr><fat><nFat>1</nFat><vOrig>36.64</vOrig><vDesc>0.00</vDesc><vLiq>36.64</vLiq></fat></cobr><pag><detPag><indPag>0</indPag><tPag>99</tPag><xPag>Pagamento Digital</xPag><vPag>36.64</vPag></detPag></pag><infAdic><infCpl>/ Conf. Lei 12.741/2012 Tributação aprox. R$4.93 (13.45%) Federal e R$2.56 (7.00%) Estadual - Fonte IBPT/ Valor Aproximado dos Tributos R$7.49</infCpl></infAdic></infNFe><Signature xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><Reference URI="#NFe31251260259248000101550010000014991850095972"><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><DigestValue>ehoBMi23HnXxCqBmHEo0jJB2FDc=</DigestValue></Reference></SignedInfo><SignatureValue>TJZ31/gJfV9yS3925ysCR5A7HXzldNnO/jRSGzsm22Gl1IK/WyC9bGMKhiHBTucRePgYi1jhcZtbkKnZhUXTt6jjjQCLwo0ciK0N0BNxZyHyRsvk7FHFmI0SybIXIKH6YPPK/fWPfiRNNOL3TboXhkZ7t9cguxN7R/gqdgvAToGBiq7GqFbzXmmbxDPMa6QyGPd1i0YL/d0o3VVl6TTL9vyUClBlUzNIf+7KE9Z71ln4dAZ1Ximlwsm4VJCdbaqFjhQCxw5xqQLO/s/wy4HgcV3fJL/okOVX0efvpidl0xXZF9+lvwZjovXjBLtDprITDRtIqWzjogV41Z0Pkx3w1A==</SignatureValue><KeyInfo><X509Data><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></NFe><protNFe versao="4.00"><infProt><tpAmb>1</tpAmb><verAplic>W-3.3.23</verAplic><chNFe>31251260259248000101550010000014991850095972</chNFe><dhRecbto>2025-12-03T10:30:31-03:00</dhRecbto><nProt>131257130879214</nProt><digVal>ehoBMi23HnXxCqBmHEo0jJB2FDc=</digVal><cStat>100</cStat><xMotivo>Autorizado o uso da NF-e</xMotivo></infProt></protNFe></nfeProc>'
        ]
    ]
];

try {
    $processor = new EtiquetaShopeeProcessor();
    $pdf = $processor->renderMultiple($files);

    $pdf->Output(__DIR__ . "/saida_final.pdf", "F");

    echo ">>> PDF final gerado com sucesso!\n";
} catch (\Exception $e) {
    die("ERRO: " . $e->getMessage() . "\n");
}
